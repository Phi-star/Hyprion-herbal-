<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Order Hyprion Herbal Capsules</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root{--green-dark:#1a3d2b;--green-mid:#2d6a4f;--green-light:#52b788;--green-pale:#b7e4c7;--gold:#d4af37;--gold-light:#f0d060;--cream:#fdf8f0;--cream-dark:#f5edd8;--text-dark:#1a1a1a;--text-mid:#3a3a3a;--text-light:#6b7280;--error:#e74c3c;--success:#27ae60;}
  *{margin:0;padding:0;box-sizing:border-box;}body{font-family:'DM Sans',sans-serif;background:var(--cream);color:var(--text-dark);}
  .order-header{background:var(--green-dark);padding:16px 5%;display:flex;align-items:center;justify-content:space-between;}
  .order-logo{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:900;color:white;text-decoration:none;}
  .order-logo span{color:var(--gold);}
  .back-link{color:rgba(255,255,255,0.7);text-decoration:none;font-size:0.88rem;}
  .back-link:hover{color:var(--gold-light);}
  .progress-wrap{background:white;border-bottom:2px solid var(--green-pale);padding:20px 5%;}
  .progress-bar{display:flex;align-items:center;justify-content:center;max-width:500px;margin:0 auto;}
  .progress-step{display:flex;flex-direction:column;align-items:center;gap:6px;flex:1;}
  .step-circle{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:0.85rem;border:2px solid var(--green-pale);color:var(--text-light);transition:all 0.3s;}
  .step-circle.active{background:var(--green-mid);border-color:var(--green-mid);color:white;}
  .step-circle.done{background:var(--success);border-color:var(--success);color:white;}
  .step-label{font-size:0.72rem;color:var(--text-light);font-weight:500;text-align:center;}
  .step-label.active{color:var(--green-mid);font-weight:700;}
  .progress-line{flex:1;height:2px;background:var(--green-pale);margin-bottom:22px;}
  .order-layout{display:grid;grid-template-columns:1fr 360px;gap:32px;max-width:1050px;margin:0 auto;padding:36px 5% 80px;}
  .form-card{background:white;border-radius:20px;padding:36px;box-shadow:0 4px 30px rgba(0,0,0,0.06);border:1px solid rgba(0,0,0,0.06);}
  .form-card-title{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:900;color:var(--green-dark);margin-bottom:6px;}
  .form-card-subtitle{color:var(--text-light);font-size:0.9rem;margin-bottom:28px;}
  .form-section-title{font-size:0.75rem;text-transform:uppercase;letter-spacing:0.12em;font-weight:700;color:var(--green-mid);margin:24px 0 14px;padding-bottom:8px;border-bottom:2px solid var(--green-pale);}
  .form-row{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
  .form-group{margin-bottom:18px;}
  .form-group.full{grid-column:1/-1;}
  label{display:block;font-size:0.8rem;font-weight:600;color:var(--text-mid);margin-bottom:6px;text-transform:uppercase;letter-spacing:0.05em;}
  label span.req{color:var(--error);}
  input,select,textarea{width:100%;padding:13px 16px;border:2px solid #e8e8e8;border-radius:10px;font-family:inherit;font-size:0.95rem;color:var(--text-dark);background:white;outline:none;transition:all 0.2s;}
  input:focus,select:focus,textarea:focus{border-color:var(--green-light);box-shadow:0 0 0 3px rgba(82,183,136,0.12);}
  input.error,select.error,textarea.error{border-color:var(--error);}
  .field-error{color:var(--error);font-size:0.78rem;margin-top:4px;display:none;}
  textarea{resize:vertical;min-height:80px;}
  .package-options{display:flex;flex-direction:column;gap:12px;margin-bottom:20px;}
  .package-option{border:2px solid #e8e8e8;border-radius:14px;padding:16px 20px;cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:space-between;position:relative;}
  .package-option:hover{border-color:var(--green-light);}
  .package-option.selected{border-color:var(--green-mid);background:#f0faf4;}
  .package-option.popular::before{content:'POPULAR';position:absolute;top:-10px;right:16px;background:var(--gold);color:var(--green-dark);font-size:0.65rem;font-weight:800;padding:3px 10px;border-radius:50px;}
  .package-option.best::before{content:'BEST VALUE';position:absolute;top:-10px;right:16px;background:var(--green-mid);color:white;font-size:0.65rem;font-weight:800;padding:3px 10px;border-radius:50px;}
  .pkg-info{display:flex;align-items:center;gap:14px;}
  .pkg-radio{width:20px;height:20px;border:2px solid #ccc;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all 0.2s;}
  .package-option.selected .pkg-radio{border-color:var(--green-mid);}
  .pkg-radio-dot{width:10px;height:10px;background:var(--green-mid);border-radius:50%;display:none;}
  .package-option.selected .pkg-radio-dot{display:block;}
  .pkg-name{font-weight:700;font-size:0.95rem;color:var(--green-dark);}
  .pkg-bottles{font-size:0.8rem;color:var(--text-light);}
  .pkg-price{font-weight:700;color:var(--green-mid);font-size:1rem;}
  .submit-btn{width:100%;padding:18px;background:linear-gradient(135deg,var(--green-mid),var(--green-dark));color:white;border:none;border-radius:14px;font-family:inherit;font-size:1.05rem;font-weight:700;cursor:pointer;transition:all 0.3s;box-shadow:0 6px 24px rgba(45,106,79,0.4);margin-top:8px;}
  .submit-btn:hover{transform:translateY(-2px);}
  .submit-btn:disabled{opacity:0.6;cursor:not-allowed;transform:none;}
  .summary-sidebar{display:flex;flex-direction:column;gap:20px;}
  .summary-card{background:white;border-radius:20px;padding:24px;box-shadow:0 4px 30px rgba(0,0,0,0.06);border:1px solid rgba(0,0,0,0.06);}
  .summary-card-title{font-family:'Playfair Display',serif;font-size:1.05rem;font-weight:900;color:var(--green-dark);margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid var(--green-pale);}
  .summary-product-img{width:100%;border-radius:12px;background:var(--cream);display:flex;align-items:center;justify-content:center;height:180px;margin-bottom:16px;overflow:hidden;}
  .summary-product-img img{width:100%;height:100%;object-fit:contain;padding:12px;}
  .summary-product-name{font-weight:700;font-size:1rem;color:var(--green-dark);margin-bottom:4px;}
  .summary-line{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px solid #f0f0f0;font-size:0.9rem;}
  .summary-line:last-child{border-bottom:none;}
  .summary-line .label{color:var(--text-light);}.summary-line .value{font-weight:600;color:var(--text-dark);}
  .summary-total{display:flex;justify-content:space-between;align-items:center;padding:14px 0 0;border-top:2px solid var(--green-pale);}
  .summary-total .label{font-weight:700;font-size:0.95rem;}
  .summary-total .value{font-family:'Playfair Display',serif;font-size:1.4rem;font-weight:900;color:var(--green-dark);}
  .payment-badge{background:#e8f5e9;border:1px solid var(--green-pale);border-radius:10px;padding:12px 16px;text-align:center;font-size:0.85rem;font-weight:600;color:var(--green-dark);}
  .payment-badge span{display:block;font-size:0.78rem;color:var(--text-light);font-weight:400;margin-top:3px;}
  .trust-badges{display:flex;flex-direction:column;gap:8px;}
  .trust-item{display:flex;align-items:center;gap:10px;font-size:0.85rem;color:var(--text-mid);}
  .trust-icon{width:28px;height:28px;border-radius:50%;background:var(--green-pale);display:flex;align-items:center;justify-content:center;font-size:0.9rem;flex-shrink:0;}
  .success-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:9999;display:none;align-items:center;justify-content:center;}
  .success-overlay.show{display:flex;}
  .success-card{background:white;border-radius:24px;padding:48px 40px;max-width:440px;width:90%;text-align:center;animation:scale-in 0.4s ease;}
  .success-icon{font-size:4rem;margin-bottom:20px;}
  .success-title{font-family:'Playfair Display',serif;font-size:1.8rem;font-weight:900;color:var(--green-dark);margin-bottom:12px;}
  .success-msg{color:var(--text-light);line-height:1.7;margin-bottom:24px;}
  .success-id{background:var(--cream);border-radius:10px;padding:12px 16px;font-family:monospace;font-size:0.95rem;font-weight:700;color:var(--green-dark);margin-bottom:28px;}
  .success-btn{background:linear-gradient(135deg,var(--green-mid),var(--green-dark));color:white;padding:14px 36px;border-radius:50px;font-weight:700;text-decoration:none;display:inline-block;}
  @keyframes scale-in{from{transform:scale(0.8);opacity:0;}to{transform:scale(1);opacity:1;}}
  @media(max-width:900px){.order-layout{grid-template-columns:1fr;}.summary-sidebar{order:-1;}.summary-product-img{height:140px;}}
  @media(max-width:600px){.form-row{grid-template-columns:1fr;}.form-card{padding:24px 18px;}.order-layout{padding:20px 4% 60px;}}
</style>
</head>
<body>
<div class="order-header">
  <a href="/hyprion" class="order-logo">Hyp<span>rion</span></a>
  <a href="/hyprion" class="back-link">‚Üê Back to Site</a>
</div>
<div class="progress-wrap">
  <div class="progress-bar">
    <div class="progress-step"><div class="step-circle active" id="step1circle">1</div><div class="step-label active">Your Details</div></div>
    <div class="progress-line"></div>
    <div class="progress-step"><div class="step-circle" id="step2circle">2</div><div class="step-label" id="step2label">Confirmation</div></div>
    <div class="progress-line"></div>
    <div class="progress-step"><div class="step-circle" id="step3circle">3</div><div class="step-label" id="step3label">Order Placed</div></div>
  </div>
</div>
<div class="order-layout">
  <div class="form-card">
    <h1 class="form-card-title">Place Your Order</h1>
    <p class="form-card-subtitle">Fill in your details below. We'll call you to confirm before delivery.</p>
    <div class="form-section-title">Choose Your Package</div>
    <div class="package-options">
      <div class="package-option selected" onclick="selectPackage(this,'Starter Wellness Pack (1 Pack) ‚Äî ‚Ç¶15,500',1)">
        <div class="pkg-info"><div class="pkg-radio"><div class="pkg-radio-dot"></div></div><div><div class="pkg-name">üå± Starter Wellness Pack</div><div class="pkg-bottles">1 Pack</div></div></div>
        <div class="pkg-price">‚Ç¶15,500</div>
      </div>
      <div class="package-option popular" onclick="selectPackage(this,'Popular Care Pack (2 Packs) ‚Äî ‚Ç¶26,500',2)">
        <div class="pkg-info"><div class="pkg-radio"><div class="pkg-radio-dot"></div></div><div><div class="pkg-name">‚≠ê Popular Care Pack</div><div class="pkg-bottles">2 Packs</div></div></div>
        <div class="pkg-price">‚Ç¶26,500</div>
      </div>
      <div class="package-option" onclick="selectPackage(this,'One-Month Stability Pack (3 Packs) ‚Äî ‚Ç¶37,500',3)">
        <div class="pkg-info"><div class="pkg-radio"><div class="pkg-radio-dot"></div></div><div><div class="pkg-name">üóìÔ∏è One-Month Stability Pack</div><div class="pkg-bottles">3 Packs</div></div></div>
        <div class="pkg-price">‚Ç¶37,500</div>
      </div>
      <div class="package-option" onclick="selectPackage(this,'Premium Heart Care Pack (4 Packs) ‚Äî ‚Ç¶48,500',4)">
        <div class="pkg-info"><div class="pkg-radio"><div class="pkg-radio-dot"></div></div><div><div class="pkg-name">üëë Premium Heart Care Pack</div><div class="pkg-bottles">4 Packs</div></div></div>
        <div class="pkg-price">‚Ç¶48,500</div>
      </div>
      <div class="package-option" onclick="selectPackage(this,'Extended Wellness Pack (5 Packs) ‚Äî ‚Ç¶59,500',5)">
        <div class="pkg-info"><div class="pkg-radio"><div class="pkg-radio-dot"></div></div><div><div class="pkg-name">üíº Extended Wellness Pack</div><div class="pkg-bottles">5 Packs</div></div></div>
        <div class="pkg-price">‚Ç¶59,500</div>
      </div>
      <div class="package-option best" onclick="selectPackage(this,'Couples & Family Care Pack (6 Packs) ‚Äî ‚Ç¶70,500',6)">
        <div class="pkg-info"><div class="pkg-radio"><div class="pkg-radio-dot"></div></div><div><div class="pkg-name">‚ù§Ô∏è Couples & Family Pack</div><div class="pkg-bottles">6 Packs</div></div></div>
        <div class="pkg-price">‚Ç¶70,500</div>
      </div>
    </div>
    <div class="form-section-title">Personal Information</div>
    <div class="form-row">
      <div class="form-group"><label>Full Name <span class="req">*</span></label><input type="text" id="fullName" placeholder="e.g. Adeyemi Okonkwo"><div class="field-error" id="err-fullName">Please enter your full name.</div></div>
      <div class="form-group"><label>Phone Number <span class="req">*</span></label><input type="tel" id="phone" placeholder="e.g. 08012345678"><div class="field-error" id="err-phone">Please enter a valid phone number.</div></div>
      <div class="form-group"><label>WhatsApp Number</label><input type="tel" id="whatsapp" placeholder="If different from phone"></div>
      <div class="form-group"><label>Email Address</label><input type="email" id="email" placeholder="Optional"></div>
    </div>
    <div class="form-section-title">Delivery Address</div>
    <div class="form-row">
      <div class="form-group"><label>State <span class="req">*</span></label>
        <select id="state">
          <option value="">Select State...</option>
          <option>Abia</option><option>Adamawa</option><option>Akwa Ibom</option><option>Anambra</option>
          <option>Bauchi</option><option>Bayelsa</option><option>Benue</option><option>Borno</option>
          <option>Cross River</option><option>Delta</option><option>Ebonyi</option><option>Edo</option>
          <option>Ekiti</option><option>Enugu</option><option>FCT ‚Äì Abuja</option><option>Gombe</option>
          <option>Imo</option><option>Jigawa</option><option>Kaduna</option><option>Kano</option>
          <option>Katsina</option><option>Kebbi</option><option>Kogi</option><option>Kwara</option>
          <option>Lagos</option><option>Nasarawa</option><option>Niger</option><option>Ogun</option>
          <option>Ondo</option><option>Osun</option><option>Oyo</option><option>Plateau</option>
          <option>Rivers</option><option>Sokoto</option><option>Taraba</option><option>Yobe</option>
          <option>Zamfara</option>
        </select>
        <div class="field-error" id="err-state">Please select your state.</div>
      </div>
      <div class="form-group"><label>Nearest Area / Bus Stop <span class="req">*</span></label><input type="text" id="city" placeholder="e.g. Ikeja, Lekki, Garki"><div class="field-error" id="err-city">Please enter your nearest area.</div></div>
      <div class="form-group full"><label>Full Delivery Address <span class="req">*</span></label><textarea id="address" rows="3" placeholder="House number, street name, area..."></textarea><div class="field-error" id="err-address">Please enter your delivery address.</div></div>
      <div class="form-group full"><label>Additional Notes</label><textarea id="notes" rows="2" placeholder="Any special instructions for delivery?"></textarea></div>
    </div>
    <div class="form-section-title">How Did You Hear About Us?</div>
    <div class="form-row">
      <div class="form-group"><label>Source</label><select id="source"><option value="">Select...</option><option>Facebook</option><option>Instagram</option><option>WhatsApp</option><option>TikTok</option><option>YouTube</option><option>Friend / Family</option><option>Google Search</option><option>Twitter / X</option><option>Other</option></select></div>
      <div class="form-group"><label>Referral Code (optional)</label><input type="text" id="referral" placeholder="If you have one"></div>
    </div>
    <button class="submit-btn" id="submitBtn" onclick="submitOrder()">üõí Place My Order ‚Äì Pay on Delivery</button>
    <div style="margin-top:16px;padding:14px 18px;background:#fff9e6;border-radius:10px;border:1px solid #f0c040;font-size:0.8rem;color:#7a5a00;line-height:1.6;text-align:center;">
      ‚ö†Ô∏è <strong>NOTE:</strong> Delivery is within <strong>24‚Äì48 hours</strong>. Please do not order if you are not ready within this timeframe.<br>Questions? WhatsApp: <strong>09865554333</strong> üîí You only pay when the rider delivers to your door.
    </div>
  </div>

  <div class="summary-sidebar">
    <div class="summary-card">
      <div class="summary-card-title">üì¶ Order Summary</div>
      <div class="summary-product-img" id="summaryProductImg">
        <img src="/api/hyprion-img/0" alt="Hyprion Herbal Capsules">
      </div>
      <div class="summary-product-name">Hyprion Herbal Capsules</div>
      <div style="margin-top:14px">
        <div class="summary-line"><span class="label">Package</span><span class="value" id="summaryPackage">Starter Wellness Pack (1 Pack)</span></div>
        <div class="summary-line"><span class="label">Delivery</span><span class="value" id="summaryState">Select state above</span></div>
        <div class="summary-line"><span class="label">Payment</span><span class="value">On Delivery</span></div>
      </div>
      <div class="summary-total"><span class="label">Total Due</span><span class="value">On Delivery</span></div>
    </div>
    <div class="summary-card"><div class="payment-badge">üíµ Payment on Delivery<span>You pay ONLY when you receive your package</span></div></div>
    <div class="summary-card">
      <div class="summary-card-title">‚úÖ Why Order With Us</div>
      <div class="trust-badges">
        <div class="trust-item"><div class="trust-icon">üöö</div>Free delivery nationwide</div>
        <div class="trust-item"><div class="trust-icon">üíµ</div>Pay only on delivery</div>
        <div class="trust-item"><div class="trust-icon">üåø</div>100% authentic herbal product</div>
        <div class="trust-item"><div class="trust-icon">üîí</div>Your data is safe with us</div>
        <div class="trust-item"><div class="trust-icon">üìû</div>We call to confirm before shipping</div>
      </div>
    </div>
  </div>
</div>

<div class="success-overlay" id="successOverlay">
  <div class="success-card">
    <div class="success-icon">üéâ</div>
    <div class="success-title">Order Placed!</div>
    <p class="success-msg">Thank you! Your order has been received. We will call you shortly to confirm your delivery details.</p>
    <div class="success-id" id="successOrderId">Order ID: ‚Äî</div>
    <a href="/hyprion" class="success-btn">‚Üê Back to Home</a>
  </div>
</div>

<script>
// Images via server proxy ‚Äî no browser blocking
let imgIdx = 0;
const TOTAL_IMAGES = 5;
setInterval(() => {
  imgIdx = (imgIdx + 1) % TOTAL_IMAGES;
  const el = document.querySelector('#summaryProductImg img');
  if (el) el.src = `/api/hyprion-img/${imgIdx}`;
}, 3000);

document.getElementById('state').addEventListener('change', function() {
  document.getElementById('summaryState').textContent = this.value || 'Select state above';
});

let selectedPackage = 'Starter Wellness Pack (1 Pack) ‚Äî ‚Ç¶15,500';
let selectedQty     = 1;

function selectPackage(el, name, qty) {
  document.querySelectorAll('.package-option').forEach(o => o.classList.remove('selected'));
  el.classList.add('selected');
  selectedPackage = name; selectedQty = qty;
  document.getElementById('summaryPackage').textContent = name;
}

function showError(id, msg) {
  const f = document.getElementById(id); const e = document.getElementById('err-'+id);
  if(f)f.classList.add('error'); if(e){if(msg)e.textContent=msg;e.style.display='block';}
}
function clearError(id) {
  const f = document.getElementById(id); const e = document.getElementById('err-'+id);
  if(f)f.classList.remove('error'); if(e)e.style.display='none';
}

function validate() {
  let ok = true;
  ['fullName','phone','state','city','address'].forEach(id => clearError(id));
  const fn = document.getElementById('fullName').value.trim();
  const ph = document.getElementById('phone').value.trim();
  const st = document.getElementById('state').value;
  const ci = document.getElementById('city').value.trim();
  const ad = document.getElementById('address').value.trim();
  if(fn.length<2){showError('fullName','Please enter your full name.');ok=false;}
  if(!/^[0-9+\s\-]{7,15}$/.test(ph)){showError('phone','Please enter a valid phone number.');ok=false;}
  if(!st){showError('state','Please select your state.');ok=false;}
  if(ci.length<2){showError('city','Please enter your city or LGA.');ok=false;}
  if(ad.length<5){showError('address','Please enter your full delivery address.');ok=false;}
  return ok;
}

async function submitOrder() {
  if(!validate()) return;
  const btn = document.getElementById('submitBtn');
  btn.disabled = true; btn.textContent = '‚è≥ Placing your order...';

  const payload = {
    fullName:   document.getElementById('fullName').value.trim(),
    phone:      document.getElementById('phone').value.trim(),
    whatsapp:   document.getElementById('whatsapp').value.trim(),
    email:      document.getElementById('email').value.trim(),
    state:      document.getElementById('state').value,
    city:       document.getElementById('city').value.trim(),
    address:    document.getElementById('address').value.trim(),
    notes:      document.getElementById('notes').value.trim(),
    package:    selectedPackage, packageQty: selectedQty,
    source:     document.getElementById('source').value,
    referral:   document.getElementById('referral').value.trim()
  };

  try {
    const resp = await fetch('/api/hyprion-order', {
      method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload)
    });
    const data = await resp.json();
    if(resp.ok && data.success) {
      document.getElementById('step1circle').classList.add('done');
      document.getElementById('step2circle').classList.add('done');
      document.getElementById('step3circle').classList.add('active');
      document.getElementById('step3label').classList.add('active');
      document.getElementById('successOrderId').textContent = 'Order ID: ' + data.orderId;
      document.getElementById('successOverlay').classList.add('show');
    } else {
      alert('‚ö†Ô∏è ' + (data.message || 'Order failed. Please try again.'));
      btn.disabled=false; btn.textContent='üõí Place My Order ‚Äì Pay on Delivery';
    }
  } catch(err) {
    alert('‚ö†Ô∏è Network error. Please check your connection and try again.');
    btn.disabled=false; btn.textContent='üõí Place My Order ‚Äì Pay on Delivery';
  }
}
</script>
</body>
</html>
